func g(): Unit begin
  let p : Promise*(Int) = promise Int in
  if true then
    p <- 10
  else
    f(p)
  end;
  for i = 5 to 10 begin
    let q : Promise*(Bool) = promise Bool in
    let u : Unit = q <- true in
    let z : Bool = ?q in
    ()
  end;
  unsafeWrite(p, 42)
end
