union ABC begin
  K[ABC];
  L[Promise*(Int)]
end

func cleanUp(abc: ABC): Unit begin
  match abc begin
    K[etc] -> cleanUp(etc)
    L[p] -> p <- 0
  end
end

func main(): Unit begin
  let p: Promise*(Int) = promise Int in
  let abc: ABC = K[L[p]] in
  cleanUp(abc)
end
