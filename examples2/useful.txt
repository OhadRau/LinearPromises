func waitN(n: Int): Unit begin
  for i = 0 to n begin
    ()
  end
end

func task(): Int begin
  waitN(1000000);
  555
end

func future(): Promise(Int) begin
  promise r, w: Int in
  async w <- task();
  r
end

func doubleInt(n: Int): Int begin
  let q: String = "hello" in
  n + n
end

func main(): Unit begin
  let result: Promise(Int) = future() in
  promise r, w: Int in
  async println(intToString(?result));
  async w <- doubleInt(?result);
  async println(intToString(?r))
end
